<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CNC AI ProgramÃ¡tor Pro</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <h1>ğŸ”§ CNC AI ProgramÃ¡tor Pro</h1>
    </header>

    <main>
      <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('editor')">
          ğŸ“ Editor G-kÃ³du
        </button>
        <button class="tab-btn" onclick="switchTab('chat')">ğŸ’¬ AI Chat</button>
        <button class="tab-btn" onclick="switchTab('calculator')">
          ğŸ§® KalkulaÄka RPM
        </button>
        <button class="tab-btn" onclick="switchTab('toolcalc')">
          ğŸ”§ Korekce NÃ¡strojÅ¯
        </button>
        <button class="tab-btn" onclick="switchTab('mathcalc')">
          ğŸ§· Math KalkulaÄka
        </button>
        <button class="tab-btn" onclick="switchTab('reference')">
          ğŸ“š Reference
        </button>
        <button class="tab-btn" onclick="switchTab('settings')">
          âš™ï¸ NastavenÃ­
        </button>
      </div>

      <!-- Editor Tab -->
      <div id="editor" class="tab-content active">
        <div class="card">
          <h2>ğŸ“ Editor G-kÃ³du</h2>
          <p style="color: #64748b; margin-bottom: 20px;">Edituj, uklÃ¡dej a analyzuj svÃ© CNC programy s podporou AI</p>

          <h3>G-kÃ³d Program</h3>
          <textarea id="gcode" placeholder="VloÅ¾te svÅ¯j G-kÃ³d zde... NapÅ™: G00 X10 Y20&#10;G01 Z-5 F100&#10;M30" rows="12" style="font-size: 12px;">; Karusel PodloÅ¾ky
G54 T1 D1 G95 M41
G97 S60 M4
G91 G1 X-300 F1
M30</textarea>

          <div class="grid-2">
            <div>
              <label for="machineType">Typ stroje:</label>
              <select id="machineType" onchange="saveMachine()">
                <option value="carousel">Karusel podloÅ¾ky</option>
                <option value="cnc">CNC frÃ©zka</option>
                <option value="lathe">Soustruh</option>
                <option value="grinding">Bruska</option>
              </select>
            </div>
            <div>
              <label for="controlSystem">OvlÃ¡dacÃ­ systÃ©m:</label>
              <select id="controlSystem" onchange="saveMachine()">
                <option value="sinumerik">SINUMERIK</option>
                <option value="fanuc">FANUC</option>
                <option value="heidenhain">HEIDENHAIN</option>
              </select>
            </div>
          </div>

          <h3>Akce:</h3>
          <button onclick="saveGCode()">ğŸ’¾ UloÅ¾it program</button>
          <button onclick="clearGCode()">ğŸ—‘ï¸ Vymazat</button>
          <button onclick="exportGCode()">ğŸ“¥ StÃ¡hnout G-kÃ³d</button>

          <div id="status" class="status"></div>
        </div>
      </div>

      <!-- Chat Tab -->
      <div id="chat" class="tab-content">
        <div class="card">
          <h2>ğŸ’¬ AI Chat s Gemini</h2>

          <div style="margin-bottom: 15px">
            <label for="apiKey">Gemini API KlÃ­Ä:</label>
            <input
              type="password"
              id="apiKey"
              placeholder="VloÅ¾te svÅ¯j Gemini API klÃ­Ä"
              style="margin-bottom: 5px"
            />
            <button onclick="saveApiKey()" style="width: 100%">
              ğŸ” UloÅ¾it API klÃ­Ä
            </button>
          </div>

          <div
            style="
              height: 400px;
              border: 1px solid #cbd5e1;
              border-radius: 6px;
              padding: 10px;
              overflow-y: auto;
              background: #f8fafc;
              margin-bottom: 10px;
            "
            id="chatMessages"
          >
            <div
              style="
                color: #64748b;
                font-size: 13px;
                text-align: center;
                padding: 20px;
              "
            >
              Zde se budou zobrazovat zprÃ¡vy. ZatÃ­m Å¾Ã¡dnÃ¡ konverzace.
            </div>
          </div>

          <div style="display: flex; gap: 10px; margin-bottom: 10px">
            <textarea
              id="chatInput"
              placeholder="NapiÅ¡ svou otÃ¡zku k AI..."
              style="flex: 1; height: 80px; resize: vertical"
            ></textarea>
          </div>

          <div style="display: flex; gap: 10px">
            <button onclick="sendChatMessage()" style="flex: 1">
              ğŸ“¤ Odeslat
            </button>
            <button onclick="analyzeGCodeAI()" style="flex: 1">
              ğŸ” Analyzovat G-kÃ³d
            </button>
            <button onclick="clearChat()" style="flex: 1">
              ğŸ—‘ï¸ Vymazat chat
            </button>
          </div>

          <div id="chatStatus" class="status"></div>
        </div>
      </div>

      <!-- Tool Offset Calculator Tab -->
      <div id="toolcalc" class="tab-content">
        <div class="card">
          <h2>ğŸ”§ Korekce NÃ¡strojÅ¯</h2>
          <p style="color: #64748b; margin-bottom: 20px;">VypoÄÃ­tej novÃ© L-hodnoty pro korekce nÃ¡strojÅ¯ (X/Z osy)</p>

          <div style="margin-bottom: 20px;">
            <label for="offsetAxis">PracovnÃ­ osa:</label>
            <select id="offsetAxis" onchange="updateToolCalc()" style="background: linear-gradient(135deg, #f8fafc 0%, #f0f4ff 100%);">
              <option value="X">ğŸ“ Osa X</option>
              <option value="Z">ğŸ“ Osa Z</option>
          <div class="grid-2">
            <div>
              <h3>AktuÃ¡lnÃ­ nastavenÃ­</h3>
              <label for="displayValue">Hodnota displeje (mm):</label>
              <input type="number" id="displayValue" step="0.001" onchange="updateToolCalc()">

              <label for="targetValue">CÃ­lovÃ¡ hodnota (mm):</label>
              <input type="number" id="targetValue" step="0.001" onchange="updateToolCalc()">
            </div>

            <div>
              <h3>KorekÄnÃ­ hodnota</h3>
              <label for="currentL">AktuÃ¡lnÃ­ L-tabulka (mm):</label>
              <input type="number" id="currentL" step="0.001" onchange="updateToolCalc()">

              <button onclick="copyToolValue()" style="width: 100%;">ğŸ“‹ KopÃ­rovat novou hodnotu</button>
            </div>
          </div>

          <div id="toolResult" class="info-box success" style="display:none; margin-top: 15px; font-size: 16px; font-weight: bold;"></div>
        </div>
      </div>

      <!-- Math Calculator Tab -->
      <div id="mathcalc" class="tab-content">
        <div class="card">
          <h2>ğŸ§· VÄ›deckÃ¡ MatematickÃ¡ KalkulaÄka</h2>

          <textarea id="mathExpression" placeholder="NapiÅ¡ vÃ½raz: 10*5+3, sin(90), sqrt(16), atd..." style="font-size: 18px; font-weight: bold; text-align: center; height: 50px;"></textarea>

          <div id="mathResult" style="background: #1e293b; color: #10b981; padding: 15px; border-radius: 6px; font-size: 24px; font-weight: bold; font-family: monospace; text-align: center; margin: 10px 0; display: none;"></div>

          <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 10px;">
            <button onclick="appendMathChar('1')">1</button>
            <button onclick="appendMathChar('2')">2</button>
            <button onclick="appendMathChar('3')">3</button>
            <button onclick="appendMathChar('+')">+</button>

            <button onclick="appendMathChar('4')">4</button>
            <button onclick="appendMathChar('5')">5</button>
            <button onclick="appendMathChar('6')">6</button>
            <button onclick="appendMathChar('-')">âˆ’</button>

            <button onclick="appendMathChar('7')">7</button>
            <button onclick="appendMathChar('8')">8</button>
            <button onclick="appendMathChar('9')">9</button>
            <button onclick="appendMathChar('*')">Ã—</button>

            <button onclick="appendMathChar('0')">0</button>
            <button onclick="appendMathChar('.')">.</button>
            <button onclick="appendMathChar('(')">(</button>
            <button onclick="appendMathChar('/')" style="background: #667eea;">Ã·</button>
          </div>

          <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 10px;">
            <button onclick="appendMathChar('sqrt(')">âˆšx</button>
            <button onclick="appendMathChar('Math.pow(')">x^y</button>
            <button onclick="appendMathChar('Math.PI')">Ï€</button>
            <button onclick="appendMathChar('Math.sin(')">sin</button>

            <button onclick="appendMathChar('Math.cos(')">cos</button>
            <button onclick="appendMathChar('Math.tan(')">tan</button>
            <button onclick="appendMathChar('Math.abs(')">|x|</button>
            <button onclick="deleteMathChar()" style="background: #ef4444;">âŒ«</button>
          </div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <button onclick="calculateMath()" style="background: #10b981; font-weight: bold; padding: 12px;">= VypoÄÃ­tat</button>
            <button onclick="clearMath()" style="background: #ef4444;">C Vymazat</button>
          </div>

          <div id="mathHistory" style="margin-top: 20px; border-top: 1px solid #e2e8f0; padding-top: 10px;">
            <h3>Historie</h3>
            <div id="mathHistoryList" style="max-height: 200px; overflow-y: auto;">
              <div style="color: #94a3b8; font-size: 13px; text-align: center; padding: 10px;">ZatÃ­m Å¾Ã¡dnÃ½ vÃ½poÄet</div>
            </div>
          </div>
        </div>
      </div>
        <div class="card">
          <h2>KalkulaÄka NÃ¡strojÅ¯</h2>

          <div class="grid-2">
            <div>
              <h3>Å˜eznÃ¡ rychlost (vc) â†’ RPM</h3>
              <label for="toolDiameter">PrÅ¯mÄ›r nÃ¡stroje (mm):</label>
              <input
                type="number"
                id="toolDiameter"
                value="10"
                min="0.1"
                step="0.1"
              />

              <label for="cutSpeed">Å˜eznÃ¡ rychlost vc (m/min):</label>
              <input type="number" id="cutSpeed" value="50" min="1" step="1" />

              <button onclick="calculateRPM()">VypoÄÃ­tat RPM</button>
              <div id="rpmResult" class="info-box" style="display: none"></div>
            </div>

            <div>
              <h3>PosuvovÃ¡ rychlost</h3>
              <label for="rpm">RPM:</label>
              <input type="number" id="rpm" value="1500" min="1" step="1" />

              <label for="feedPerTooth">Posuv na zub fz (mm/zub):</label>
              <input
                type="number"
                id="feedPerTooth"
                value="0.1"
                min="0.01"
                step="0.01"
              />

              <label for="teeth">PoÄet zubÅ¯:</label>
              <input type="number" id="teeth" value="4" min="1" step="1" />

              <button onclick="calculateFeed()">VypoÄÃ­tat Posun</button>
              <div id="feedResult" class="info-box" style="display: none"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Settings Tab -->
      <div id="settings" class="tab-content">
        <div class="card">
          <h2>NastavenÃ­</h2>

          <h3>NastavenÃ­ stroje</h3>
          <label for="maxRpm">MaximÃ¡lnÃ­ RPM:</label>
          <input type="number" id="maxRpm" value="5000" min="100" step="100" />

          <label for="maxFeed">MaximÃ¡lnÃ­ posuv (mm/min):</label>
          <input type="number" id="maxFeed" value="1000" min="10" step="10" />

          <label for="workX">PracovnÃ­ vzdÃ¡lenost X (mm):</label>
          <input type="number" id="workX" value="500" min="10" step="10" />

          <label for="workY">PracovnÃ­ vzdÃ¡lenost Y (mm):</label>
          <input type="number" id="workY" value="400" min="10" step="10" />

          <label for="workZ">PracovnÃ­ vzdÃ¡lenost Z (mm):</label>
          <input type="number" id="workZ" value="300" min="10" step="10" />

          <button onclick="saveSettings()">ğŸ’¾ UloÅ¾it nastavenÃ­</button>
          <button onclick="resetSettings()">ğŸ”„ Obnovit vÃ½chozÃ­</button>

          <div class="info-box">
            â„¹ï¸ NastavenÃ­ se automaticky uklÃ¡dajÃ­ do pamÄ›ti prohlÃ­Å¾eÄe
          </div>
        </div>
      </div>

      <!-- Reference Tab -->
      <div id="reference" class="tab-content">
        <div class="card">
          <h2>ReferenÄnÃ­ manuÃ¡l</h2>

          <h3>ZÃ¡kladnÃ­ G-kÃ³dy</h3>
          <div class="code-block">
            G00 - Rychloposuv G01 - LineÃ¡rnÃ­ interpolace G02 - KruhovÃ¡
            interpolace (CW) G03 - KruhovÃ¡ interpolace (CCW) G04 - ÄŒasovÃ¡ pauza
            G17 - Rovina XY G18 - Rovina XZ G19 - Rovina YZ G20 - Palce G21 -
            Milimetry G28 - NÃ¡vrat do referenÄnÃ­ho bodu G30 - NÃ¡vrat do 2.
            referenÄnÃ­ho bodu G54 - Offset stroje 1 G55 - Offset stroje 2
          </div>

          <h3>M-kÃ³dy</h3>
          <div class="code-block">
            M00 - ZastavenÃ­ programu M01 - PodmÃ­nÄ›nÃ© zastavenÃ­ M02 - Konec
            programu M03 - VÅ™eteno CW M04 - VÅ™eteno CCW M05 - VÅ™eteno STOP M06 -
            VÃ½mÄ›na nÃ¡stroje M08 - ChladÃ­cÃ­ kapalina ON M09 - ChladÃ­cÃ­ kapalina
            OFF M30 - Konec a reset
          </div>

          <h3>SINUMERIK Specifika</h3>
          <div class="code-block">
            R-parametry: R0 aÅ¾ R999 CYCLE ...: Cyklus definice MSG(): ZprÃ¡va
            TRANS: Transformace ROT: Rotace
          </div>

          <h3>FANUC Specifika</h3>
          <div class="code-block">
            #-promÄ›nnÃ©: #0 aÅ¾ #199 (lokÃ¡lnÃ­), #500+ G65/G66: Makro volÃ¡nÃ­ M98:
            VolÃ¡nÃ­ podprogramu M99: NÃ¡vrat z podprogramu
          </div>

          <h3>HEIDENHAIN Specifika</h3>
          <div class="code-block">
            CYCL DEF: Definice cyklu CALL LBL: VolÃ¡nÃ­ znaÄky L X Y Z: Pohyb v
            katalogu TOOL CALL: VÃ½bÄ›r nÃ¡stroje BEGIN PGM: ZaÄÃ¡tek programu
          </div>
        </div>
      </div>

      <div class="footer">
        <p>CNC AI ProgramÃ¡tor Pro | Verze 1.0 | Â© 2025</p>
        <p>Aplikace pro sprÃ¡vu CNC programÅ¯ bez potÅ™eby serveru</p>
      </div>
    </main>

    <script src="script.js"></script>
  </body>
</html>
